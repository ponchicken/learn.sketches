{"version":3,"sources":["piano/script.js"],"names":["notes","do","document","getElementById","re","mi","fa","sol","lya","si","buttons","querySelector","recButton","playlistEl","addEventListener","recordMusic","isRec","buttonIsActive","storagePlaylist","localStorage","getItem","playlist","JSON","parse","displayPlaylist","setItem","stringify","innerHTML","melody","el","createElement","textContent","appendChild","buttonplay","classList","add","pause","milliseconds","date","Date","now","currentDate","playStopButton","e","target","contains","Mass","arr1","previousSibling","split","console","log","i","length","play","style","backgroundColor","push","some","key","tagName","dataset","id","window","event"],"mappings":"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","file":"script.838ebe2f.js","sourceRoot":"../src","sourcesContent":["const notes = {\n  do: document.getElementById(\"note_do\"),\n  re: document.getElementById(\"note_re\"),\n  mi: document.getElementById(\"note_mi\"),\n  fa: document.getElementById(\"note_fa\"),\n  sol: document.getElementById(\"note_sol\"),\n  lya: document.getElementById(\"note_lya\"),\n  si: document.getElementById(\"note_si\")\n};\n\nlet buttons = document.querySelector(\".buttons-piano\");\n\nconst recButton = document.getElementById(\"rec\");\n//const playButton = document.getElementById(\"play\");\n//const stopButton = document.getElementById(\"stop\");\nconst playlistEl = document.querySelector(\".control-playlist\");\n\nrecButton.addEventListener(\"click\", recordMusic);\n//playButton.addEventListener(\"click\", playMusic);\n//stopButton.addEventListener(\"click\", stopMusic);\n\nlet isRec = false;\nlet buttonIsActive = false;\n\nconst storagePlaylist = localStorage.getItem(\"playlist\");\nlet playlist = storagePlaylist ? JSON.parse(storagePlaylist) : [];\n\nfunction displayPlaylist() {\n  localStorage.setItem(\"playlist\", JSON.stringify(playlist));\n  playlistEl.innerHTML = \"\";\n\n  for (let melody of playlist) {\n    const el = document.createElement(\"li\");\n    el.textContent = melody;\n    playlistEl.appendChild(el);\n\n    const buttonplay = document.createElement(\"button\");\n    buttonplay.textContent = \">\";\n    buttonplay.classList.add(\"ButtonPlay\");\n    el.appendChild(buttonplay);\n  }\n}\n\nfunction pause(milliseconds) {\n  const date = Date.now();\n  let currentDate = null;\n  do {\n    currentDate = Date.now();\n  } while (currentDate - date < milliseconds);\n}\n\nplaylistEl.addEventListener(\"click\", playStopButton);\n\nfunction playStopButton(e) {\n  if (e.target.classList.contains(\"ButtonPlay\")) {\n    let Mass = e.target.previousSibling;\n    let arr1 = Mass.textContent.split(\",\");\n    console.log(arr1);\n    for (let i = 0; i < arr1.length; i++) {\n      console.log(arr1[i]);\n\n      if (arr1[i] == \"do\") {\n        notes[\"do\"].play();\n        pause(200);\n      } else if (arr1[i] == \"re\") {\n        notes[\"re\"].play();\n        pause(200);\n      } else if (arr1[i] == \"mi\") {\n        notes[\"mi\"].play();\n        pause(200);\n      } else if (arr1[i] == \"fa\") {\n        notes[\"fa\"].play();\n        pause(200);\n      } else if (arr1[i] == \"sol\") {\n        notes[\"sol\"].play();\n        pause(200);\n      } else if (arr1[i] == \"lya\") {\n        notes[\"lya\"].play();\n        pause(200);\n      } else if (arr1[i] == \"si\") {\n        notes[\"si\"].play();\n        pause(200);\n      }\n    }\n  }\n}\n// buttonIsActive = !buttonIsActive;\n// if (buttonIsActive) {\n//   //почему не работает?\n//   // buttonplay.textContent = \"||\";\n//   // console.log(buttonplay.textContent);\n//   // e.target.playlist.contains(\"ButtonPlay\");\n//   // console.log();\n// } else {\n//   // buttonplay.textContent = \">\";\n// }\ndisplayPlaylist();\n\nfunction recordMusic() {\n  console.log(\"REC\");\n  isRec = !isRec;\n  if (isRec) {\n    recButton.style.backgroundColor = \"rgb(172, 49, 90)\";\n    playlist.push([]);\n  } else {\n    recButton.style.backgroundColor = \"#ddd\";\n    displayPlaylist();\n  }\n}\n\n//function playMusic() {\n//console.log(\"PLAY\");}\n\n//function stopMusic() {\n//console.log(\"STOP\");}\n\nbuttons.addEventListener(\"click\", e => {\n  if (e.target.tagName === \"BUTTON\") {\n    console.log(e.target.dataset.id);\n    notes[e.target.dataset.id].play();\n\n    if (isRec) {\n      playlist[playlist.length - 1].push(e.target.dataset.id);\n    }\n\n    console.log(playlist);\n  }\n});\n\nfunction some(key) {\n  switch (key) {\n    case \"a\":\n      return notes[\"do\"].play();\n    case \"s\":\n      return notes[\"re\"].play();\n    case \"d\":\n      return notes[\"mi\"].play();\n    case \"f\":\n      return notes[\"fa\"].play();\n    case \"g\":\n      return notes[\"sol\"].play();\n    case \"h\":\n      return notes[\"lya\"].play();\n    case \"j\":\n      return notes[\"si\"].play();\n  }\n}\n\nwindow.addEventListener(\"keydown\", function(event) {\n  console.log(event);\n\n  console.log(some(event.key));\n});\n"]}